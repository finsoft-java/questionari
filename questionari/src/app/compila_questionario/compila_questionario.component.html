
<h3>Questionario</h3>


<div *ngIf="questionarioCompilato != null">

Progetto: {{questionarioCompilato.progetto.titolo}}<br>
Questionario: {{questionarioCompilato.questionario.titolo}}<br>


<div *ngIf="questionarioCompilato.utenti_valutati">
        Quale utente stai valutando?
        <select [(ngModel)]="utente_valutato_corrente" >
                <option *ngFor="let utente of questionarioCompilato.utenti_valutati"value="{{utente}}">{{ utente }}</option>
        </select>
</div>

<br/>

<div *ngIf="sezione_corrente != null">

        <h2>SEZIONE N. {{sezione_corrente.progressivo_sezione}} '{{sezione_corrente.titolo}}' </h2>
        {{sezione_corrente.descrizione}}

        <table class="table table-striped" style="background-color: #f8f9fa;margin-top:30px;">
                <thead>
                        <th style="width:50%">Domanda</th>
                        <th>Risposta</th>
                        <th>Note</th>
                </thead>
                <tr *ngFor="let domanda of sezione_corrente.domande">
                        <td>
                                {{domanda.progressivo_domanda}}.
                                {{domanda.descrizione}}
                        </td>
                        <td>
                                <div *ngIf="domanda.risposte.length > 0"> <!-- DOMANDA CHIUSA -->
                                        <select [(ngModel)]="domanda.risposta.progressivo_risposta" [disabled]="questionarioCompilato.stato != '0'">
                                                <option *ngFor="let opt of domanda.risposte"value="{{opt.progressivo_risposta}}">{{ opt.descrizione }}</option>
                                        </select>
                                        <br/>
                                </div>
                                <div *ngIf="domanda.risposte.length == 0"> <!-- DOMANDA APERTA -->
                                        <input
                                                [(ngModel)]="domanda.risposta.risposta_aperta"
                                                [disabled]="questionarioCompilato.stato != '0'"
                                                [type]="domanda.html_type || 'text'"
                                                [pattern]="domanda.html_pattern"
                                                [max]="domanda.html_max"
                                                [min]="domanda.html_min"
                                                [maxlength]="domanda.html_maxlength"
                                        />
                                </div>
                        </td>
                        <td>
                                <textarea [(ngModel)]="domanda.risposta.note" [disabled]="questionarioCompilato.stato != '0'"></textarea>
                        </td>
                </tr>
        </table>

<div>
        <button class="btn" (click)="sezPrecedente()">Sez. precedente</button>
        <button class="btn" (click)="sezSuccessiva()" [disabled]="!is_sezione_completata()">Sez. successiva</button>
</div>

</div>


Questo bottone deve comparire solo se il questionario Ã¨ tutto compilato, per tutte le sezioni e per tutti gli utenti valutati:
<button *ngIf="questionarioCompilato.stato == '0'" class="btn btn-danger" (click)="convalida()" >Convalida il questionario</button>

</div>